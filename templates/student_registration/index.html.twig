{% extends 'base.html.twig' %}

{% block title %}
	Student index

{% endblock %}
{% block maintitle %}

	{% trans %}
	Student
	{% endtrans %}
{% endblock %}
{% block breadcrumb %}

	<li class="breadcrumb-item ">
		<a href="{{ path('app_student_index') }}">
			{% trans %}
			Student
			{% endtrans %}
		</a>
	</li>

{% endblock %}

{% block body %}
<div class="text-center">
  <form  method="post">
  <input type="hidden" name="sync" value="true">
  <button type="submit" class="btn btn-flat btn-success mb-2 ml-5">Fetch From Student</button>
</form>
</div>
<div class="">
<div class="form-group col-md-12">

{% if datas.getTotalItemCount > 0 %}

	{% if isfiltered %}
			{# <button class="btn btn-flat btn-outline-primary" type="button" id="AssignFilteredButton">Promote Filtered</button> #}

			<input type="submit" class="btn btn-flat btn-outline-primary" name="promoteFiltered" id="AssignFilteredButton"  value="Promote Filtered" form="filteruserform"/>
			<input type="submit" class="btn btn-flat btn-outline-primary" name="removeFiltered"  value="Remove Filtered" form="filteruserform"/>
			<input type="submit" class="selectedStudent d-none btn btn-flat btn-outline-primary" name="promote-selected" id="AssignFilteredButton"  value="Promote  Selected" form="filteruserform"/>


           <input type="submit" class="selectedStudent d-none btn btn-flat btn-outline-primary" name="sponsor" id="AssignSelectedButton" value="Sponsor  Selected" form="filteruserform"/>
		   <input type="submit" class="selectedStudent d-none btn btn-flat btn-outline-primary" name="remove-sponsor" id="AssignSelectedButton" value="Remove  Sponsor Selected" form="filteruserform"/>
		   {# <input type="submit" class="selectedStudent d-none btn btn-flat btn-outline-primary" name="RemoveFiltered" name="not-promote" id="AssignFilteredButton"  value="Not Promote  Selected" form="filteruserform"/> #}


		
{% endif %}
{% endif %}


</div>
</div>
	{% embed 'common/index.html.twig' %}
	{% block filter_form %}
			{{ form_start(form,{'attr': {'role':'form','id':'filteruserform' }}
			) }}
			<div class="row">
				
				<div class="form-group col-md-4">
					<label class="col-sm-5 control-label no-padding-right">
						{{ form_label(form.year) }}
					</label>
					{{ form_widget(form.year,{'attr':{'class':'select2bs4 form-control' }}
					) }}

					<div class="help-block with-errors"></div>
				</div>
				
				<div class="form-group col-md-4">
					<label class="">
						{{ form_label(form.grade) }}
					</label>
					{{ form_widget(form.grade,{'attr':{'class':'form-control select2bs4 ' }}
					) }}

					<div class="help-block with-errors"></div>
				</div>
				<div class="form-group col-md-4">
					<label class="">
						{{ form_label(form.status) }}
					</label>
					{{ form_widget(form.status,{'attr':{'class':'form-control select2bs4 ' }}
					) }}

					<div class="help-block with-errors"></div>
				</div>
				<div class="form-group col-md-4">
					<label class="">
						{{ form_label(form.isfree) }}
					</label>
					{{ form_widget(form.isfree,{'attr':{'class':'form-control select2bs4 ' }}
					) }}

					<div class="help-block with-errors"></div>
				</div>
			
			
			
				<div class="form-group col-md-4">

					<div class="row">
						<div class="col-md-8">
							<label class="">
								{{ form_label(form.gender) }}
							</label>
							{{ form_widget(form.gender,{'attr':{'class':'select2bs4 form-control' }}
							) }}

						</div>
						<div class="col-md-2 mt-4">
							<button class="btn btn-info btn-sm  btn-flat mt-3" type="submit">
								Filter
							</button>
						</div>
						<div class="col-md-2 mt-4">
							<input type="submit" class="btn btn-warning btn-sm btn-flat mt-3" value="Clear" name="reset"/>

						</div>
					</div>
					<div class="help-block with-errors"></div>

				</div>
				<div class="form-group col-md-12 float-right">
              <input type="submit" class="btn btn-secondary float-right  " value="PDF" name="pdf">
				</div>
			</div>
			{{ form_end(form) }}
		{% endblock %}
	
		{% block table %}
			<thead>
				<tr>
					<th># <div class="icheck-primary d-inline">
						<input type="checkbox" id="checkAll" {{isfiltered?:"disabled"}} >
						<label for="checkAll">
						</label>
					  </div></th>
					<th class="align-middle">{{ knp_pagination_sortable(datas, 'IDNumber', 's.idNumber') }}</th>
				     <th class="align-middle">{{ knp_pagination_sortable(datas, 'FullName', 's.firstName') }}</th>

					{# <th class="align-middle">FullName</th> #}
					<th class="align-middle">Sex</th>
					<th class="align-middle">Age</th>
					<th class="align-middle">Phone</th>
                     <th class="align-middle">Year</th>
                    <th class="align-middle">Grade</th>


					
					<th class="align-middle">Status</th>
				<th class="align-middle">IsFree</th>


				
                <th class="align-middle">CreatedBy</th>
			<th class="align-middle">CreatedAt</th>


					<th class="align-middle">actions</th>
				</tr>
			</thead>
			<tbody>
				{% set i =  datas.getItemNumberPerPage() * (datas.getCurrentPageNumber() -1) %}
				{% for data in datas %}
				{% set i = i+1 %}
					<tr>
						<td>
							
								

							
							<div class="icheck-primary d-inline ml-2">
							<input class="checkstudent" type="checkbox" value="{{data.id}}" data-value="{{ data.id}}" id="{{ data.id}}" name="student[]" form="filteruserform" {{isfiltered?:"disabled"}}>
							<label for="{{ data.id}}"></label>
						</div>

						</td>
						<td class="align-middle text-nowrap">{{ data.student.idNumber }}</td>

						<td class="align-middle text-nowrap">{{ data.student.getFullName|upper }}</td>
						<td class="align-middle">{{ data.student.sex }}</td>
						<td class="align-middle">{{ data.student.age }}</td>
						<td class="align-middle">{{ data.student.phone }}</td>
                        <td class="align-middle">{{ data.year }}</td>

						<td class="align-middle">{{ data.grade }}</td>
					<td class="align-middle">{{ data.isCompleted?'<span class="badge badge-success">COMPLETED</span>':'<span class="badge badge-primary">ACTIVE</span>' }}</td>

					    <td class="align-middle">{{ data.isFree? '<span class="badge badge-info">YES</span>':'<span class="badge badge-danger">NO</span>' }}</td>
						<td class="align-middle">{{ data.createdBy }}</td>

						<td class="align-middle">{{ data.createdAt ? data.createdAt|date('Y-m-d') : '' }}</td>
						<td class="project-actions text-right">
							<a href="{{ path('app_student_show', {'id': data.student.id}) }}" title="view" class="btn btn-info btn-sm d-inline text-nowrap">
								<i class="fa fa-eye mr-1"></i>View</a>
							<a href="{{ path('app_student_registration_edit', {'id': data.id}) }}" title="edit" class="btn btn-warning btn-sm mt-1">
								<i class="fa fa-edit mr-1">Edit</i>
							</a>
							

						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="13">no records found</td>
					</tr>
				{% endfor %}
			</tbody>
		{% endblock %}
	{% endembed %}

{% endblock %}
{% block javascripts %}
	<script>
		$(function () { // Initialize Select2 Elements
        $('.select2').select2();


$('.select2bs4').select2({theme: 'bootstrap4'});

$('#checkAll').click(function () {
	$("input[type=checkbox].checkstudent").prop('checked', $(this).prop('checked'));
	if ($(this).prop('checked')) {
	$(".selectedStudent").removeClass('d-none');
	
	} else {
	$(".selectedStudent").addClass('d-none');
	}
	
	})
	$('.checkstudent').click(function () {
if ($(this).prop('checked')) {
$(".selectedStudent").removeClass('d-none');
}
if ($("input[type=checkbox]:checked.checkstudent").length == 0) 
$(".selectedStudent").addClass('d-none');
})


});
	</script>

{% endblock %}
